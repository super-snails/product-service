package com.tsing.product.api.dict.common.impl;import com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;import com.baomidou.mybatisplus.core.metadata.IPage;import com.baomidou.mybatisplus.core.toolkit.Wrappers;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;import com.tsing.global.result.ResultPageData;import com.tsing.global.utils.ObjectMappingUtil;import com.tsing.product.api.dict.bo.reponse.ProductDictPageReponse;import com.tsing.product.api.dict.bo.request.ProductDictSaveRequest;import com.tsing.product.api.dict.bo.request.ProductDictUpdateRequest;import com.tsing.product.api.dict.common.ProductDictCommonService;import com.tsing.product.api.dict.entity.ProductDictEntity;import com.tsing.product.api.dict.mapper.ProductDictMapper;import org.apache.commons.lang3.StringUtils;import org.springframework.stereotype.Service;import java.util.List;import javax.annotation.Resource;import lombok.val;/** * @author Tsing * @version 0.0.1 * @date 2021/8/5 6:13 上午 * @description: 产品字典服务核心处理层 */@Servicepublic class ProductDictCommonServiceImpl implements ProductDictCommonService {    @Resource    private ProductDictMapper productDictMapper;    @Override    public ProductDictEntity coverProductDictSaveRequestToEntity(ProductDictSaveRequest param) {        return ObjectMappingUtil.map(param, ProductDictEntity.class);    }    @Override    public Boolean save(ProductDictEntity entity) {        return productDictMapper.insert(entity) > 0;    }    @Override    public ProductDictEntity coverProductDictUpdateRequestToEntity(ProductDictUpdateRequest param) {        return ObjectMappingUtil.map(param, ProductDictEntity.class);    }    @Override    public Boolean modify(ProductDictEntity param) {        Long id = param.getId();        String categoryCode = param.getCategoryCode();        String dictCode = param.getDictCode();        ProductDictEntity entity = productDictMapper.selectById(id);        if(entity.getCategoryCode().equals(categoryCode) && entity.getDictCode().equals(dictCode)) {            return false;        }        return productDictMapper.updateById(entity) > 0;    }    @Override    public Page<ProductDictEntity> pagingQuery(String categoryCode, String dictCode) throws Exception {        if(StringUtils.isBlank(categoryCode) || StringUtils.isBlank(dictCode)) {            throw new Exception("param is error");        }        LambdaQueryWrapper<ProductDictEntity> queryWrapper = Wrappers.<ProductDictEntity>lambdaQuery();        queryWrapper.eq(StringUtils.isNotBlank(categoryCode), ProductDictEntity::getCategoryCode, categoryCode);        queryWrapper.eq(StringUtils.isNotBlank(dictCode), ProductDictEntity::getDictCode, dictCode);        return productDictMapper.selectPage(new Page<>(1, 9000), queryWrapper);    }    @Override    public ResultPageData<ProductDictPageReponse> coverProductDictPageEntityToBo(Page<ProductDictEntity> param) {        IPage<ProductDictPageReponse> entityPage = param.convert(entity -> ObjectMappingUtil.map(entity, ProductDictPageReponse.class));        long pages = entityPage.getPages();        long size = entityPage.getSize();        long total = entityPage.getTotal();        List<ProductDictPageReponse> records = entityPage.getRecords();        return new ResultPageData<>(pages, size, total, records);    }}